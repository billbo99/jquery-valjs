/*! ValJS v0.7.5 (2015-01-04) | (c) 2014 | www.valjs.io */
window.ValJS=function(P,g){function q(){var a=Array.prototype.slice.call(arguments);return g.extend.apply(g,a)}function h(a){return void 0===a}function B(a){return"string"===typeof a}function p(a){return h(a)||null===a||h(a.length)?0:a.length}function D(a,c){return g(c).find(a)}function y(a,c){B(c)&&(c={error:c});g.isFunction(a)&&(a={error:a});B(a)?a=h(c)?{error:a}:q(!0,{error:a},c):h(a)?a=c:"object"===typeof a?a=q(!0,{},a,c):console&&console.error&&console.error("valjsGetMsgConfig",a,c);return a}
function l(a,c){var b=c.options;/^[a-z]+$/.test(a)?(h(b)||h(b.msg)||(b.msg=y(b.msg)),h(c.value)&&(c.value=!0),c=q(!0,{},t.ruleDefaults,{name:a},c),G.rules.k.push(a),G.rules[a]=c):g.error("Bad rule name")}function z(a,c,b){var d=a.config.elements,e=a.config.modifiers||{},f=d&&d[c]?[d[c]]:[],n="";if(!b)return f[0];a.config.modifierSeparator&&d[c]&&(n=d[c]+a.config.modifierSeparator);if(B(b))f.push(h(n+e[b])?"":e[b]);else if(p(b))for(a=0;a<p(b);a+=1)f.push(h(n+e[b[a]])?"":e[b[a]]);return f.join(" ")}
function V(a){var c=a.element;return c?c.data("vjs-cfg").iFindMsgFn(a):null}function H(a,c){return a.addClass(c)}function L(a,c,b,d){if(a)return a.removeClass(c.vars[b]),H(a,z(c,b,d)),a}function I(a){if(!h(a.data("valjs-ty")))return a.data("valjs-ty");var c=a.prop("tagName").toLowerCase(),b={type:null},d=["text","checkbox","file","radio","submit"];"input"===c?(c=a.prop("type").toLowerCase(),h(c)||(-1===g.inArray(c,d)?(b[c]=!0,b.type="text"):b.type=c)):"select"===c?(b.type=c,b.isMultiple=h(a.attr("multiple"))?
!1:!0):"textarea"===c&&(b.type=c);a.data("valjs-ty",b);return b}function M(a,c){var b=I(a),d=a.data("vjs-vc"),e=null,f={value:null,upd:!0};if("submit"===b.type)return f;switch(b.type){case "checkbox":case "radio":e=a.prop("checked");break;case "select":f.value=g.map(a.find("option"),function(a){a=g(a);if(a.is(":selected"))return h(a.val())?a.text():a.val()});e=f.value.join(",");""===e&&0<p(f.value)&&(e=" ");break;default:e=a.val()}h(d)?h(c)||"click"!==c.type||(f.upd=!1):d===e&&(f.upd=!1);null===f.value&&
(f.value=e);a.data("vjs-vc",e);return f}function ga(a,c){var b={},d=a.attr("name");d&&!h(c[d])&&(h(c[d].findMsg)||(b.findMsg=c[d].findMsg),h(c[d].findLabel)||(b.findLabel=c[d].findLabel));return b}function ha(a,c,b,d){var e={};a=a.attr("name");var f=q(!0,{},b.fields);b=b.rules;h(b)||h(b[c])||(e=q(e,b[c]),!1!==d&&(e.elmRules={},e.elmRules[c]=1),h(b[c].msg)||(e.msg=y(b[c].msg)));f&&a&&!h(f[a])&&(h(f[a].msg)||(e.msg=y(f[a].msg,e.msg)),h(f[a][c])||(e.elmRules={},e.elmRules[c]="instance.name",h(f[a][c].msg)||
(e.msg=y(e.msg,f[a][c].msg),delete f[a][c].msg),e=q(!0,e,f[a][c])));return e}function Q(a){for(var c=/-([a-z0-9])/g,b=c.exec(a),d=String(a);null!==b;)d=d.replace(b[0],String(b[1].toUpperCase())),b=c.exec(a);return d}function ia(a,c,b,d){var e={},f="data-"+a.config.attrPrefix+b.name,n=c.attr(f),g=null;if(d=!h(d.elmRules)&&!h(d.elmRules[b.name]))g={data:{}};else if(h(n)){var g=null,m=void 0,k=b.name;!0===a.config.allowRuleInitialization&&(a=b.testElement({form:a.$form,context:a.jqContext,rule:b,element:c,
valjs:a}),"object"===typeof a?h(a[k])?g={data:a}:(g={data:{}},m={},m[k]="custombind"):"boolean"===typeof a&&!0===a&&(g={data:{}},m={},m[k]="bind"));e.elmRules=m}else e.elmRules={},e.elmRules[b.name]="attribute";h(n)||(g={data:{}},""!==n||h(b.options)||h(b.options.value)||(n=b.options.value),g.data.value=n);if(g||d){e.elmRules={};e.elmRules[b.name]=1;n={};if(null!==g){c=c[0].attributes;a={};for(n=0;n<p(c);n+=1)d=c[n].name,0===d.indexOf(f+"-")&&d.length>f.length&&(k=Q(d.substr(p(f)+1)),c[n].value?(m=
c[n].value,h(b.options)||h(b.options[k])||"boolean"===typeof b.options[k]&&("true"===m.toLowerCase()?m=!0:"false"===m.toLowerCase()&&(m=!1)),k=f+"-msg",0===d.indexOf(k)?d===k?(a.msg=a.msg||{},a.msg.error=m):-1!==d.indexOf(k+"-")&&(a.msg=a.msg||{},a.msg[Q(d.substr((k+"-").length))]=m):a[Q(d.substr(p(f)+1))]=m):(a[k]="",h(b.options)||h(b.options[k])||"boolean"===typeof b.options[k]&&(a[k]=!0)));n=a}e=q(!0,{},e,g.data,n);h(e.msg)||(e.msg=y(e.msg))}return e}function ja(a,c){var b=G.rules,d,e,f={},n,v=
{};n={};var m={},k={};h(a.config.msg)||(f.msg=y(a.config.msg));e=q({findMsg:a.config.findMsg,findLabel:a.config.findLabel},ga(c,a.config));k={ruleNames:[],rulesField:c.attr("id")};(d=c.attr("data-"+a.config.attrPrefix+"msg"))&&(v={msg:y(d)});for(d=0;d<p(b.k);d+=1)m={},m=h(b[b.k[d]].options)?{}:b[b.k[d]].options,n=ha(c,b.k[d],a.config,!1),m=q(!0,{},m,f,n,v),n=ia(a,c,b[b.k[d]],m),m=q(!0,m,n),m.msg=m.msg||{},h(m.elmRules)||(delete m.elmRules,k.ruleNames.push(b.k[d]),k[b.k[d]]=m);k.iFindMsgFn=e.findMsg;
k.iFindLabelFn=e.findLabel;k.ruleNames.sort(function(a,c){a=b[a].prio;c=b[c].prio;return a<c?-1:a>c?1:0});d={valjs:a,elm:c,config:k};a.config.setupField!==g.noop&&a.config.setupField(d);return d.config}function J(a,c){var b=D("label[for='"+a.attr("id")+"']",c.jqContext);0===b.length&&"LABEL"===a.parent().get(0).nodeName&&(b=a.parent());return b}function O(a,c,b){c=jQuery.Event(c+".valjs",b);a.trigger(c);return c}function W(a,c,b){var d=b.status,e=c.data("vjs-cfg"),f=b.state,g=b.message,h=null,m=""!==
g&&"invalid"===d,k,q=!1;k=J(c,a);"valid"===d?(h="valid",q=!0):"unknown"===d?(h="unknown",q=!0):(h=["invalid",f],q=!1);b.ruleConfig=e[b.rule];b=V({element:c,valjs:a,create:m,validation:b});1===p(b)&&(q?b.html("").hide():b.html(g),c.data("vjs-msge",b),L(b,a,"msg",h));L(c,a,"field",h);1===p(k)&&L(k,a,"label",h);return c}function X(a){return a.is(":visible")&&!a.is(":disabled")}function Y(a,c){a.removeData("vjs-h");a.removeData("vjs-v");a.removeData("vjs-vs");var b={status:"unknown"};O(a,"refreshfield",
{valjs:q(b,{context:c.jqContext,form:c.$form,element:a})}).isDefaultPrevented()||W(c,a,b)}function R(a,c,b,d,e){if(!1!==c.config.liveValidation||e){if(X(a)){var f,n=(f=a.data("vjs-cfg"))?f.ruleNames:null,v,m,k,N=[],t=[],l={},x=[];v="";l=a.data("vjs-h");h(e)&&(e=!1);h(d)&&(d=M(a,b));for(v=0;v<p(n);v+=1){m=G.rules[n[v]];k=f[n[v]];var r=c,u=a,A=m,w=k;k={event:b,config:w,valjs:r,element:u,field:q({value:d.value},I(u))};k=A.run(k,u);u={valjs:r,config:w,rule:A,element:u,msgName:null};w=void 0;r={ok:!0,
result:null};A=u.rule;if(!0!==k&&("object"!==typeof k||k.msg)){var w=u,y=k,z=void 0;"boolean"===typeof y?z="error":"object"===typeof y?z=y.msg:B(y)&&(z=y);w.msgName=z;"object"===typeof k&&(w=q(!0,{},k),delete w.msg,u.result=w);A.options&&A.options.msg&&null===A.options.msg.error&&null!==u.config.msg.error&&(u.msgName="error");A=u;u=u.config;w=A.msgName;g.isFunction(u.msg)?k=u.msg(A):h(u.msg)||h(u.msg[w])||(g.isFunction(u.msg[w])?k=u.msg[w](A):B(w)&&(k=u.msg[w]));r.ok=!1}r.result=k;k=r;!1===k.ok?(x.push(m.name+
k.result),N.push(q(!0,{},{msg:k.result},{rule:m.name}))):t.push(q(!0,{},k.result,{rule:m.name}))}b=(e?"1":"0")+x.join("|");d=5381;for(f=0;f<p(b);f+=1)n=b.charCodeAt(f),d=(d<<5)+d+n;v=d;e&&(v=new Date);if(l===v&&!1===c.config.alwaysTriggerFieldEvents)return a.data("vjs-vs");a.data("vjs-h",v);if(!h(c)&&0<p(N)){l={status:"invalid",state:e?"error":"warning",message:N[0].msg,rule:N[0].rule};if(e=J(a,c))l.label=e.text();a.data("vjs-v",-1)}else l={status:"valid"},a.data("vjs-v",1);a.data("vjs-vs",l);O(a,
"refreshfield",{valjs:q(l,{context:c.jqContext,form:c.$form,element:a})}).isDefaultPrevented()||W(c,a,l);return 1===a.data("vjs-v")?!0:l}a.data("vjs-h")&&Y(a,c)}}function S(a){if(g(this).data("vjs-cfg")){var c=M(g(this),a);!0===c.upd&&R(g(this),a.data.valjs,a,c)}}function Z(a){var c=a.data.valjs,b=c.$form;"TEXTAREA"!==g(a.target).prop("tagName")&&(b.data("vjs-fct",c),"keydown"===a.type&&13===a.keyCode&&(b.data("vjs-fct",c),0<p(c.s)?(a.preventDefault(),g(c.s).first().trigger("click")):0===p(b.find('input[type="submit"],button[type="submit"],button:not([type]),input[type="image"]'))&&
(a.preventDefault(),b.trigger("submit"))))}function aa(a,c,b){var d,e,f,n={invalid:[]},v=p(a.e);for(d=0;d<v;d+=1)f=g(a.e[d]),e=M(f,c),e=R(f,a,c,e,!0===b?!0:!1),h(e)||!0===e||"invalid"!==e.status||n.invalid.push(e);return n}function ka(a,c){if(c&&!0===c.valjsDone)return!0;var b=g(this).data("vjs-fct"),d=null,e;if(!b)return a.preventDefault(),g(this).trigger("submit",{valjsDone:!0}),!0;e=b.jqContext;g(this).removeData("vjs-fct");d=aa(b,a,!0);if(0===p(d.invalid)){var d=b.context,f=b.$form[0],h=b.$form[0],
v=b.context,b=b.jqContext.find("input,select,textarea,button").serializeArray(),m={},k,l;for(l=0;l<p(b);l+=1)m[b[l].name]?(B(m[b[l].name])&&(k=String(m[b[l].name]),m[b[l].name]=[k]),m[b[l].name].push(b[l].value)):m[b[l].name]=b[l].value;e=O(e,"submitform",{currentTarget:d,target:f,valjs:q({},{form:h,context:v,formData:m})});e.isDefaultPrevented()?a.preventDefault():g(this).trigger("submit",{valjsDone:!0})}else return O(e,"invalidform",{target:b.context,valjs:q({},d,{form:b.$form[0],context:b.context})}),
g(this).removeData("vjs-fct"),a.preventDefault(),!1}function E(a){var c=[],b;for(b=0;b<p(a);b+=1)c.push(a[b]+".valjs");return c.join(" ")}function F(a,c){return h(a)?-1:a.indexOf(c)}function la(a){var c=a.elements,b=a.modifiers||{},d=[],e,f,g,h={};for(e in b)b.hasOwnProperty(e)&&d.push(e);for(f in c)if(c.hasOwnProperty(f)){e=[];for(g=0;g<p(d);g+=1)e.push((a.modifierSeparator?c[f]+a.modifierSeparator:"")+b[d[g]]);h[f]=e.join(" ")}return h}function ma(a,c){var b=null;if(0===F(c,"#"))return g(c);b=a.find('[name="'+
c+'"]');0===p(b)&&(b=a.find(c).first());return b}function K(a){var c=a.config.selector,b;a.e=[];c=D(c.elements,a.context);for(b=0;b<p(c);b+=1){var d;d=a;var e=g(c[b]),f=ja(d,e),n=G.rules,l=void 0,m=void 0,k=void 0,r=f.ruleNames;f.ruleNames=[];if(0===p(r))d=void 0;else{e.data("vjs-cfg",f);for(k=0;k<p(r);k+=1)l=n[r[k]],m=null===l.bind||h(l.bind)||l.bind===g.noop?!0:l.bind(q({config:d.config,context:d.jqContext,form:d.$form},{valjs:d,element:e,field:I(e),config:f[l.name],rule:l})),!1!==m?("object"===
typeof m&&(f[l.name]=q(!0,{},f[l.name],m)),f.ruleNames.push(r[k])):delete f[r[k]];delete f.rulesField;f.fieldType=I(e);0<f.ruleNames.length?(t.idCounter+=1,f.uid=t.idCounter,k=e.data("vjs-ct")?"":"unknown",H(e,z(d,"field",k)).data("vjs-ct",d).data("vjs-cfg",f).data(d.vars.off,0),L(J(e,d),d,"label",k),d=!0):(n=V(e,d,!1),f=J(e,d),n&&n.hide(),n=z(d,"field"),e.removeClass(n),e.removeClass(d.vars.field),f&&(n=z(d,"label"),f.removeClass(n),f.removeClass(d.vars.label)),e.removeClass("valjs-ty"),e.removeClass("vjs-i"),
e.removeClass("vjs-cfg"),e.removeClass("vjs-ct"),e.removeClass("vjs-h"),e.removeClass("vjs-v"),e.removeClass("vjs-vs"),e.removeClass("vjs-vc"),d=!1)}d&&a.e.push(c[b])}a.$form.data("vjs-b")||(a.$form.data("vjs-b",1),a.$form.on(E(["submit"]),{valjs:a},ka));a.jqContext.on(E(["click","change","keyup","blur"]),"textarea, input:not([type=checkbox], [type=radio], [type=submit], [type=button])",{valjs:a},S).on(E(["keydown"]),{valjs:a},Z).on(E(["click","change"]),"select",{valjs:a},S).on(E(["click","change"]),
"input[type=checkbox], input[type=radio]",{valjs:a},S);g(a.s).on(E(["click"]),{valjsSubmit:!0,valjs:a},Z)}function x(a){return parseInt(a,10)}function r(a){if(0===a)return"n/a";var c=x(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c),2)+(0<c?" ":"")+(0<c?" KMGTPEZY"[c]+"iB":" bytes")}function ba(a){a.setDate(a.getDate()+3-(a.getDay()+6)%7);return a.getFullYear()}function na(a,c){var b,d,e,f={isDate:!1,isWeek:!1,isDateRelated:!1,pattern:"",macroPositions:[]};for(b=0;b<p(c);b+=
1)f.macroPositions.push([c[b],F(a,"%"+c[b])]),"m"===c[b]?f.isDate=!0:"H"===c[b]?f.isDateTime=!0:"w"===c[b]&&(f.isWeek=!0);f.isDateRelated=f.isDate||f.isDateTime;f.isDate=!f.isWeek&&!f.isDateTime;f.macroPositions.sort(function(a,b){a=a[1];b=b[1];return a<b?-1:a>b?1:0});for(b=0;b<f.macroPositions.length;b+=1);f.pattern=a.replace(".","\\.").replace("(","\\(").replace(")","\\)").replace(/\\/g,"\\\\");for(b=0;b<p(c);b+=1){d="%"+c[b];switch(c[b]){case "y":e="(\\d{4})";break;default:e="(\\d{1,2})"}f.pattern=
f.pattern.replace(d,e)}return f}function C(a,c,b){if("now"===a)return{date:new Date};var d,e=null;c=na(c,b);if(b=new RegExp("^"+c.pattern+"$"))if(d=b.exec(a)){a={};for(b=1;b<d.length;b+=1)a[c.macroPositions[b-1][0]]=x(d[b]);c.isDateRelated?(--a.m,b=c.isDate?new Date(a.y,a.m,a.d):new Date(a.y,a.m,a.d,a.H,a.M),b.getFullYear()===a.y&&b.getMonth()===a.m&&b.getDate()===a.d&&(c.isDateTime?b.getHours()===a.H&&b.getMinutes()===a.M&&(e=q(!0,{},a,{date:b})):e=q(!0,{},a,{date:b}))):(c=new Date(a.y,0,1+7*(a.w-
1)),4>=c.getDay()?c.setDate(c.getDate()-c.getDay()+1):c.setDate(c.getDate()+8-c.getDay()),b=c,1===a.w&&ba(b)===a.y-1&&(e=q(!0,{},a,{date:b})),b.getFullYear()===ba(b)&&b.getFullYear()===a.y&&(e=q(!0,{},a,{date:b})))}return e}function ca(a,c,b,d){var e=C(a.config.max,b,d);return(a=C(a.config.min,b,d))&&c<a.date?"min":e&&c>e.date?"max":!0}function T(a,c){var b=a.field.value,d=a.config.format;if("d"===c){if(b=C(b,d,["y","m","d"]))return ca(a,b.date,"%y-%m-%d",["y","m","d"])}else if("dt"===c){if(b=C(b,
d,["y","m","d","H","M"]))return ca(a,b.date,"%y-%m-%d %H:%M",["y","m","d","H","M"])}else if("w"===c&&(b=C(b,d,["y","w"]))){var e=["y","w"],d=C(a.config.max,"%y-W%w",e),b=(e=C(a.config.min,"%y-W%w",e))&&b.date<e.date?"min":d&&b.date>d.date?"max":!0;return b}return!1}function da(a,c){var b=a.valjs("getFieldType"),d=a.attr(c);return"select"===b.type&&!0===b.isMultiple?h(d)?!1:{value:d}:!1}function U(a,c,b){if(!a)return NaN;"."!==c&&(a=a.replace(".","=-=!"));a=a.replace(c,".");a=a.replace(/^0+(\d)/,"$1");
b&&(a=a.replace(/\.0+$/,""),-1!==a.indexOf(".")&&(a=a.replace(/\.([0-9]+?)(0+)$/,".$1")));c=b?parseFloat(a):x(a);return String(c)===String(a)?c:NaN}function ea(a){if(!("text"!==a.type&&"textarea"!==a.type||a.date||a.number||a.week||a.datetime))return!0}var t=function(a,c){this.valjsv="0.7.5";this.context=a;this.jqContext=g(a);this.jqContext.data("vjs-i",this);this.options=c;this.metadata=this.jqContext.data("valjs");this.$form=null;this.vars={off:"valjs__off",clean:{}};this.e=[];this.s=[]},oa=P.ValJS&&
P.ValJS.global?P.ValJS.global:{},G=t,fa="week date datetime number listmax filemin filemax".split(" ");t.prototype={defaults:{elements:{submit:"valjs__submit",field:"valjs__field",form:"valjs__form",label:"valjs__label",msg:"valjs__msg",context:"valjs__context"},alwaysTriggerFieldEvents:!1,liveValidation:!0,createMsg:!0,modifierSeparator:null,attrPrefix:"",findMsg:function(a){var c=a.element,b=a.valjs;a=a.create;var d=null,e=b.jqContext.find("[data-msg-for='"+c.attr("id")+"']");b.config.elements&&
b.config.elements.msg&&0===p(e)&&(d="LABEL"===c.parent().prop("tagName")?c.parent():c,e=d.next("."+b.config.elements.msg));0===p(e)&&a&&b.config.createMsg&&(e=g("<span>"),e=e.insertAfter(d));a&&e.show();return e},findLabel:J,allowRuleInitialization:!0,setupField:g.noop,modifiers:{valid:"valjs-valid",invalid:"valjs-invalid",unknown:"valjs-unknown",error:"valjs-error",warning:"valjs-warning"},selector:{elements:"input:not([type=submit], [type=button]),select,textarea",submit:'input[type="submit"],button[type="submit"],button:not([type]),input[type="image"]'},
submitform:g.noop},ruleDefaults:{testElement:g.noop,bind:g.noop,prio:100,run:g.noop,options:{value:!0},findMsg:g.noop},resetField:function(){var a=g(this).data("vjs-ct");Y(g(this),a)},validateField:function(){var a=g(this).data("vjs-ct"),c=M(g(this));return R(g(this),a,c)},validateForm:function(){var a=g(this).data("vjs-i");return aa(a,jQuery.Event("validateForm"),!1)},getFieldStatus:function(){var a=g(this).data("vjs-v");return h(a)?0:a},getFieldType:function(){return I(g(this))},updateBindings:function(){K(g(this).data("vjs-i"))},
getRuleMessages:function(){K(g(this).data("vjs-i"))},init:function(){this.config=q(!0,{},this.defaults,oa,t.global,this.options);var a=this,c=this.config.selector;this.vars=la(this.config);if("FORM"===this.jqContext.prop("tagName"))this.$form=this.jqContext;else if(this.$form=this.jqContext.closest("form"),this.$form.data("vjs-i"))throw"valjs: form/context conflict";H(this.jqContext,z(this,"context"));H(this.$form.attr("novalidate",""),z(this,"form"));this.s=g(D(c.submit,this.jqContext));H(this.s,
z(this,"submit"));if(this.config.submitform&&this.config.submitform!==g.noop)this.jqContext.on("submitform.valjs",this.config.submitform);g.isFunction(this.config.init)?setTimeout(function(){K(a);a.config.init(a)},1):K(a);return this},refresh:function(){K(this)},hasRule:function(a){B(a)&&(a=[a]);var c=g(this).data("vjs-cfg"),b;if(c)for(b=0;b<a.length;b+=1){if(c.hasOwnProperty(a[b]))return!0}else g.error("ValJS not found",g(this));return!1},disable:function(a){this.valjsv&&this.$elm.find(a).data(this.vars.off,
1)}};t.idCounter=0;t.ruleDefaults=t.prototype.ruleDefaults;t.global={};t.addRule=l;t.rules={k:[]};g.fn.valjs=function(a){if(t.prototype[a]){if(g(this).data("vjs-i"))return t.prototype[a].apply(g(this),Array.prototype.slice.call(arguments,1));var c=Array.prototype.slice.call(arguments,1),b=this.map(function(b){b=c;return t.prototype[a].apply(g(this),b)});return 1===b.length?b[0]:b}if("object"===typeof a||!a)return this.each(function(){if(g(this).data("vjs-i"))return g(this).valjs("updateBindings"),
this;(new t(this,a||{})).init()});g.error("No ValJS method "+a)};l("listmin",{options:{msg:"Select more items"},testElement:function(a){return da(a.element,"min")},run:function(a){var c=a.config.value;return p(D("option:selected",a.element))>=c},bind:function(a){return{value:x(a.config.value)}}});l("listmax",{options:{msg:"Too many items selected"},testElement:function(a){return da(a.element,"max")},run:function(a){var c=a.config.value;return p(D("option:selected",a.element))<=c},bind:function(a){return{value:x(a.config.value)}}});
l("date",{options:{msg:{error:"Invalid date",max:"Enter an earlier date",min:"Enter a later date"},format:"%y-%m-%d"},testElement:function(a){return a.element.attr("type")===a.rule.name},bind:function(a){a=a.element;var c,b={};if(c=a.attr("min"))b.min=c;if(c=a.attr("max"))b.max=c;return b},run:function(a){return 0===p(a.field.value)?!0:T(a,"d")}});l("datetime",{options:{msg:{error:"Invalid date",max:"Enter an earlier date",min:"Enter a later date"},format:"%y-%m-%d %H:%M"},testElement:function(a){return a.element.attr("type")===
a.rule.name},bind:function(a){a=a.element;var c,b={};if(c=a.attr("min"))b.min=c;if(c=a.attr("max"))b.max=c;return b},run:function(a){return 0===p(a.field.value)?!0:T(a,"dt")}});l("week",{options:{msg:{error:"Invalid week",max:"Enter an earlier week",min:"Enter a later week"},format:"%y-W%w"},testElement:function(a){return a.element.attr("type")===a.rule.name},bind:function(a){a=a.element;var c,b={};if(c=a.attr("min"))b.min=c;if(c=a.attr("max"))b.max=c;return b},run:function(a){return 0===p(a.field.value)?
!0:T(a,"w")}});l("required",{options:{msg:"Required",trim:!1,emptyIndex:void 0,emptyValue:void 0},prio:10,testElement:function(a){return!h(a.element.attr(a.rule.name))},run:function(a){var c=a.element,b=a.field.type,d=a.field.value,e=0;if("text"===b||"textarea"===b||"file"===b){if(d=!0===a.config.trim?g.trim(a.field.value):d,0===p(d))return"error"}else if("select"===b)if(h(c.attr("multiple"))){if(!h(a.config.emptyIndex))return e=x(a.config.emptyIndex),d=D("option:selected",c).index(),d===e?"error":
!0;if(!h(a.config.emptyValue))return d[0]===a.config.emptyValue?"error":!0;if(0===p(d[0]))return"error"}else{if(0===p(d))return"error"}else if(("checkbox"===b||"radio"===b)&&!1===d)return"error";return!0}});l("number",{options:{msg:{error:"Not a number",max:"Value too high",min:"Value too low"},separator:".",step:null},testElement:function(a){return"number"===a.element.attr("type")},run:function(a){var c=a.field.value,b="any"===a.config.step,d=U(a.config.max,".",b),e=U(a.config.min,".",b),f=c;if(0!==
p(c)){f=U(c,a.config.separator,b);if(isNaN(f))return!1;if(!isNaN(e)&&f<e)return"min";if(!isNaN(d)&&f>d)return"max"}return!0},bind:function(a){return{step:a.element.attr("step"),min:a.element.attr("min"),max:a.element.attr("max")}}});l("textmax",{options:{msg:{error:"Text too long"}},prio:150,testElement:function(a){var c=a.element.valjs("getFieldType");if((a=a.element.attr("max"))&&ea(c))return{value:a}},bind:function(a){return a.element.valjs("hasRule",fa)?!1:q(!0,a.config,{value:x(a.config.value)})},
run:function(a){var c=a.field.value;return c&&p(c)>a.config.value?!1:!0}});l("textmin",{options:{msg:{error:"Text too short"}},prio:150,testElement:function(a){var c=a.element.valjs("getFieldType");if((a=a.element.attr("min"))&&ea(c))return{value:a}},bind:function(a){return a.element.valjs("hasRule",fa)?!1:q(!0,a.config,{value:x(a.config.value)})},run:function(a){var c=a.field.value;return c&&p(c)<a.config.value?!1:!0}});l("filemax",{options:{msg:{error:null,one:"File too large",all:"Total size too large"}},
testElement:function(a){var c=a.element.valjs("getFieldType");a=a.element.attr("max");if("file"===c.type&&a)return{value:a}},bind:function(a){return q(!0,a.config,{value:x(a.config.value)})},run:function(a){var c=a.config.value,b=a.element[0].files,d=p(b),e,f=0;if(0<d){for(e=0;e<d;e+=1)if(a=b[e].size,f+=a,a>c)return{msg:"one",maxKiB:c,maxsize:r(c),filename:b[e].name,fileKiB:a,filesize:r(a)};if(f>c)return{msg:"all",totalKiB:f,totalsize:r(f),maxsize:r(c),maxKiB:c}}return!0}});l("filemin",{options:{msg:{error:null,
one:"File too small",all:"Total size too small"}},testElement:function(a){var c=a.element.valjs("getFieldType");a=a.element.attr("min");if("file"===c.type&&a)return{value:a}},bind:function(a){return q(!0,a.config,{value:x(a.config.value)})},run:function(a){var c=a.config.value,b=a.element[0].files,d=p(b),e,f=0;if(0<d){for(e=0;e<d;e+=1)if(a=b[e].size,f+=a,a<c)return{msg:"one",minbytes:c,minsize:r(c),filename:b[e].name,filebytes:a,filesize:r(a)};if(f<c)return{msg:"all",totalbytes:f,totalsize:r(f),minsize:r(c),
minbytes:c}}return!0}});l("email",{options:{msg:{error:"Invalid e-mail"},domain:!0},testElement:function(a){return a.element.attr("type")===a.rule.name},run:function(a){var c=a.field.value,b,d=!0,e,f,g;return 0<p(c)?(B(c)||(c=c[0]),b=c.indexOf("@"),-1===b?d=!1:(e=c.substr(b+1),b=c.substr(0,b),f=b.length,g=e.length,1>f||64<f?d=!1:1>g||255<g?d=!1:"."===b[0]||"."===b[f-1]?d=!1:/\.\./.test(b)?d=!1:/^[\u00e5\u00e4\u00f6A-Za-z0-9\\-\\.]+$/.test(e)?/^[\u00e5\u00e4\u00f6A-Za-z0-9\\-\\.]+$/.test(e)?/\.\./.test(e)?
d=!1:/^(\.|[A-Za-z0-9!#%&`_=\/$\'*+?\^{}|~.\-])+$/.test(b.replace("\\\\",""))||/^"(\\\\"|[^"])+"$/.test(b.replace("\\\\",""))||(d=!1):d=!1:d=!1,a.config.domain&&(/\.[a-z]{2,4}$/.test(c)||(d=!1))),d?!0:!1):!0},bind:function(a){return"select"===a.type&&h(a.element.attr("multiple"))?!1:!0}});l("confirm",{options:{msg:{error:"Fields don't match",invalidSource:"Source field invalid"}},run:function(a){if(!X(a.config.celm))return!0;0===a.config.celm.valjs("getFieldStatus")&&a.config.celm.valjs("validateField");
return-1===a.config.celm.valjs("getFieldStatus")?"invalidSource":a.config.celm.val()===a.element.val()?!0:!1},bind:function(a){var c=ma(a.context,a.config.value);if(!h(c)){if(a.valjs.config.liveValidation)c.on("keydown keyup change blur",function(){a.element.valjs("validateField")}).on("validfield.valjs",function(){a.element.valjs("validateField")});return{celm:c}}}});l("pattern",{options:{ignoreCase:!1,invert:!1,msg:{error:"Incorrect format"}},testElement:function(a){if(a=a.element.attr("pattern"))return{value:a}},
run:function(a){var c=new RegExp(a.config.value,a.config.ignoreCase?"i":"");if(a.field.value){if(c){if(c=c.test(a.field.value))return a.config.invert?!1:!0;if(a.config.invert)return!0}return!1}return!0}});l("url",{options:{value:"ost",msg:{error:"Invalid URL"}},testElement:function(a){return"url"===a.element.attr("type")},run:function(a){return a.field.value?/^(https?|s?ftp|wss?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a.field.value):
!0}});l("security",{options:{value:"luns",match:2,msg:{error:"Requirements not met"}},bind:function(a){return{match:x(a.config.match)}},run:function(a){var c=a.field.value,b=a.config.value;a=a.config.match;var d=0;a>b.length&&(a=b.length);-1!==F(b,"l")&&(d+=c.match(/[a-z]/)?1:0);-1!==F(b,"u")&&(d+=c.match(/[A-Z]/)?1:0);-1!==F(b,"n")&&(d+=c.match(/\d/)?1:0);-1!==F(b,"s")&&(b=new RegExp("["+'!@#$%^&*()_+|~-=\u00e2\u20ac\u02dc{}[]:";\u00e2\u20ac\u2122<>?,./'.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")+"]"),c.match(b)&&(d+=1));return d>=a?!0:!1}});return t}(window,jQuery);