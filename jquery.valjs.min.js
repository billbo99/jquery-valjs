/*! ValJS v0.7 (2014-12-31) | (c) 2014 | www.valjs.io */
window.ValJS=function(ja,g){function l(a){return void 0!==a&&null!==a&&void 0!==a.length?a.length:0}function A(a,b){return g(b).find(a)}function p(a,b){void 0!==b.options&&void 0!==b.options.msg&&(b.options.msg=x(b.options.msg));void 0===b.value&&(b.value=!0);b=q(!0,{},t.ruleDefaults,{name:a},b);E.rules.k.push(a);E.rules[a]=b}function w(a,b,c){var d=a.config.elements,e=a.config.modifiers||{},f=d&&d[b]?[d[b]]:[],k="";if(!c)return f[0];a.config.modifierSeparator&&d[b]&&(k=d[b]+a.config.modifierSeparator);
if("string"===typeof c)f.push(k+(void 0!==e[c]?e[c]:""));else if(l(c))for(a=0;a<l(c);a+=1)f.push(k+(void 0!==e[c[a]]?e[c[a]]:""));return f.join(" ")}function R(a){var b=a.element;return b?b.data("vjs-cfg")._findMsgFn(a):null}function I(a,b,c,d){if(a)return a.removeClass(b.vars[c]),F(a,w(b,c,d)),a}function F(a,b){return a.addClass(b)}function G(a){if(void 0!==a.data("valjs-ty"))return a.data("valjs-ty");var b=a.prop("tagName").toLowerCase(),c={type:null},d=["text","checkbox","file","radio","submit"];
"input"===b?(b=a.prop("type").toLowerCase(),void 0!==b&&(-1===g.inArray(b,d)?(c[b]=!0,c.type="text"):c.type=b)):"select"===b?(c.type=b,c.isMultiple=void 0===a.attr("multiple")?!1:!0):"textarea"===b&&(c.type=b);a.data("valjs-ty",c);return c}function J(a,b){var c=G(a),d=a.data("vjs-vc"),e=null,f={value:null,upd:!0};if("submit"===c.type)return f;switch(c.type){case "checkbox":case "radio":e=a.prop("checked");break;case "select":f.value=g.map(a.find("option"),function(a){a=g(a);if(a.is(":selected"))return void 0!==
a.val()?a.val():a.text()});e=f.value.join(",");""===e&&0<l(f.value)&&(e=" ");break;default:e=a.val()}void 0!==d?d===e&&(f.upd=!1):void 0!==b&&"click"==b.type&&(f.upd=!1);null===f.value&&(f.value=e);a.data("vjs-vc",e);return f}function ba(a,b,c){a={};var d=b.attr("name");b.attr("id");d&&void 0!==c[d]&&(void 0!==c[d].findMsg&&(a.findMsg=c[d].findMsg),void 0!==c[d].findLabel&&(a.findLabel=c[d].findLabel));return a}function ca(a,b,c,d,e){a={};var f=b.attr("name");b.attr("id");b=q(!0,{},d.fields);d=d.rules;
void 0!==d&&void 0!==d[c]&&(a=q(a,d[c]),!1!==e&&(a._rules={},a._rules[c]=1),void 0!==typeof d[c].msg&&(a.msg=x(d[c].msg)));b&&f&&void 0!==b[f]&&(void 0!==b[f].msg&&(a.msg=x(b[f].msg,a.msg)),void 0!==b[f][c]&&(a._rules={},a._rules[c]="instance.name",void 0!==typeof b[f][c].msg&&(a.msg=x(a.msg,b[f][c].msg),delete b[f][c].msg),a=q(!0,a,b[f][c])));return a}function M(a){for(var b=/-([a-z0-9])/g,c=b.exec(a),d=a+"";null!=c;)d=d.replace(c[0],""+c[1].toUpperCase()),c=b.exec(a);return d}function da(a,b,c,
d,e){d={};var f=c.name,k="data-"+a.config.attrPrefix+f,h=b.attr(k),g=null;(e=void 0!==e._rules&&void 0!==e._rules[c.name])?g={data:{}}:void 0===h?!0===a.config.allowRuleInitialization&&(a=c.testElement({rule:c,element:b,valjs:a}),"object"===typeof a?void 0!==a[f]?(g={data:{}},d._rules={},d._rules[c.name]="custombind"):g={data:a}:"boolean"===typeof a&&!0===a&&(g={data:{}},d._rules={},d._rules[c.name]="bind")):(d._rules={},d._rules[c.name]="attribute");void 0!==h&&(g={data:{}},""===h&&void 0!==c.options&&
void 0!==c.options.value&&(h=c.options.value),g.data.value=h);if(g||e){d._rules={};d._rules[c.name]=1;c={};if(null!==g)for(b=b[0].attributes,f=0;f<l(b);f+=1)a=b[f].name,0===a.indexOf(k+"-")&&a.length>k.length&&(b[f].value?(h=b[f].value,"true"==h.toLowerCase()?h=!0:"false"==h.toLowerCase()&&(h=!1),e=k+"-msg",0===a.indexOf(e)?a==e?(c.msg=c.msg||{},c.msg.error=h):-1!==a.indexOf(e+"-")&&(c.msg=c.msg||{},c.msg[M(a.substr((e+"-").length))]=h):c[M(a.substr(l(k)+1))]=h):c[M(a.substr(l(k)+1))]=!0);d=q(!0,
{},d,g.data,c);void 0!==d.msg&&(d.msg=x(d.msg))}return d}function x(a,b){"string"===typeof b&&(b={error:b});g.isFunction(a)&&(a={error:a});if("string"===typeof a)a=void 0===b?{error:a}:q(!0,{error:a},b);else{if(void 0===a)return b;"object"===typeof a?a=q(!0,{},a,b):console&&console.error&&console.error("valjsGetMsgConfig",a,b)}return a}function ea(a,b){var c=E.rules,d,e,f={},k,h={};k={};var m={},n={};void 0!==a.config.msg&&(f.msg=x(a.config.msg));e=q({findMsg:a.config.findMsg,findLabel:a.config.findLabel},
ba(a,b,a.config));n={ruleNames:[],_field:b.attr("id")};(d=b.attr("data-"+a.config.attrPrefix+"msg"))&&(h={msg:x(d)});for(d=0;d<l(c.k);d+=1)m={},m=void 0!==c[c.k[d]].options?c[c.k[d]].options:{},k=ca(a,b,c.k[d],a.config,!1),m=q(!0,{},m,f,k,h),k=da(a,b,c[c.k[d]],a.config,m),m=q(!0,m,k),m.msg=m.msg||{},void 0!==m._rules&&(delete m._rules,n.ruleNames.push(c.k[d]),n[c.k[d]]=m);n._findMsgFn=e.findMsg;n._findLabelFn=e.findLabel;n.ruleNames.sort(function(a,b){a=c[a].prio;b=c[b].prio;return a<b?-1:a>b?1:0});
d={valjs:a,elm:b,config:n};a.config.setupField!==g.noop&&a.config.setupField(d);return d.config}function K(a,b,c){b=jQuery.Event(b+".valjs",c);a.trigger(b);return b}function H(a,b){var c=A("label[for='"+a.attr("id")+"']",b.jqContext);0===c.length&&"LABEL"==a.parent().get(0).nodeName&&(c=a.parent());return c}function S(a,b,c){var d=c.status,e=b.data("vjs-cfg"),f=c.state,g=c.message,h=null,m=""!==g&&"invalid"===d,n,q=!1;n=H(b,a);"valid"===d?(h="valid",q=!0):"unknown"==d?(h="unknown",q=!0):(h=["invalid",
f],q=!1);c.ruleConfig=e[c.rule];c=R({element:b,valjs:a,create:m,validation:c});1==l(c)&&(q?c.html("").hide():c.html(g),b.data("vjs-msge",c),I(c,a,"msg",h));I(b,a,"field",h);1==l(n)&&I(n,a,"label",h);return b}function T(a){return a.is(":visible")&&!a.is(":disabled")}function N(a,b,c,d,e){if(!1!==b.config.liveValidation||e){if(T(a)){var f,k=(f=a.data("vjs-cfg"))?f.ruleNames:null,h,m,n,v,r,p={},t,u=[],x=[],y={},w=[];h="";y=a.data("vjs-h");void 0===e&&(e=!1);void 0===d&&(d=J(a,c));for(h=0;h<l(k);h+=1)m=
E.rules[k[h]],v=f[k[h]],p={event:c,config:v,valjs:b,element:a,field:q({value:d.value},G(a))},r=m.run(p,a),!0===r||"object"===typeof r&&!r.msg?x.push({rule:m.name,result:r}):("boolean"===typeof r?n="error":"object"===typeof r?n=r.msg:"string"===typeof r&&(n=r),p={valjs:b,config:v,rule:m,element:a,msgName:n},"object"===typeof r&&(t=q(!0,{},r),delete t.msg,p.result=t),m.options&&m.options.msg&&null===m.options.msg.error&&null!==v.msg.error&&(n="error"),g.isFunction(v.msg)?r=v.msg(p):void 0!==v.msg&&
void 0!==v.msg[n]&&(g.isFunction(v.msg[n])?r=v.msg[n](p):"string"===typeof n&&(r=v.msg[n])),w.push(m.name+r),u.push({rule:m.name,msg:r}));c=(e?"1":"0")+w.join("|");d=5381;for(f=0;f<l(c);f+=1)k=c.charCodeAt(f),d=(d<<5)+d+k;h=d;e&&(h=new Date);if(y===h&&!1===b.config.alwaysTriggerFieldEvents)return a.data("vjs-vs");a.data("vjs-h",h);if(void 0!==b&&0<l(u)){y={status:"invalid",state:e?"error":"warning",message:u[0].msg,rule:u[0].rule};if(e=H(a,b))y.label=e.text();a.data("vjs-v",-1)}else y={status:"valid"},
a.data("vjs-v",1);a.data("vjs-vs",y);K(a,"refreshfield",{valjs:q(y,{context:b.jqContext,form:b.$form,element:a})}).isDefaultPrevented()||S(b,a,y);return 1===a.data("vjs-v")?!0:y}a.data("vjs-h")&&U(a,b)}}function O(a){if(g(this).data("vjs-cfg")){var b=J(g(this),a);!0===b.upd&&N(g(this),a.data.valjs,a,b)}}function V(a){var b=a.data.valjs,c=b.$form;"TEXTAREA"!==g(a.target).prop("tagName")&&(c.data("vjs-fct",b),"keydown"===a.type&&13===a.keyCode&&(c.data("vjs-fct",b),0<l(b.s)?(a.preventDefault(),g(b.s).first().trigger("click")):
0===l(c.find('input[type="submit"],button[type="submit"],button:not([type]),input[type="image"]'))&&(a.preventDefault(),c.trigger("submit"))))}function fa(a,b){if(b&&!0===b.valjsDone)return!0;var c=g(this).data("vjs-fct"),d=null,e;if(!c)return a.preventDefault(),g(this).trigger("submit",{valjsDone:!0}),!0;e=c.jqContext;g(this).removeData("vjs-fct");var f,k,h,m={invalid:[]},d=l(c.e);for(f=0;f<d;f+=1)h=g(c.e[f]),k=J(h,a),k=N(h,c,a,k,!0),void 0!==k&&!0!==k&&"invalid"===k.status&&m.invalid.push(k);d=
m;console.warn(d);if(0===l(d.invalid)){f=c.context;m=c.$form[0];d=q({},d,{form:c.$form[0],context:c.context});c=c.jqContext.find("input,select,textarea,button").serializeArray();k={};for(h=0;h<l(c);h++)k[c[h].name]=c[h].value;e=K(e,"submitform",{currentTarget:f,target:m,valjs:d,formData:k});e.isDefaultPrevented()?a.preventDefault():g(this).trigger("submit",{valjsDone:!0})}else return K(e,"invalidform",{target:c.context,valjs:q({},d,{form:c.$form[0],context:c.context})}),g(this).removeData("vjs-fct"),
a.preventDefault(),!1}function B(a){var b=[],c;for(c=0;c<l(a);c+=1)b.push(a[c]+".valjs");return b.join(" ")}function ga(a){var b=a.elements,c=a.modifiers||{},d=[],e,f,g,h={};for(e in c)c.hasOwnProperty(e)&&d.push(e);for(f in b)if(b.hasOwnProperty(f)){e=[];for(g=0;g<l(d);g+=1)e.push((a.modifierSeparator?b[f]+a.modifierSeparator:"")+c[d[g]]);h[f]=e.join(" ")}return h}function U(a,b){a.removeData("vjs-h");a.removeData("vjs-v");a.removeData("vjs-vs");var c={status:"unknown"};K(a,"refreshfield",{valjs:q(c,
{context:b.jqContext,form:b.$form,element:a})}).isDefaultPrevented()||S(b,a,c)}function ha(a,b){var c=null;if(0==C(b,"#"))return g(b);c=a.find('[name="'+b+'"]');0===l(c)&&(c=a.find(b).first());return c}function L(a){var b=a.config.selector,c;a.e=[];b=A(b.elements,a.context);for(c=0;c<l(b);c+=1){var d;d=a;var e=g(b[c]),f=ea(d,e),k=E.rules,h=void 0,m=void 0,n=void 0,p=f.ruleNames;f.ruleNames=[];if(0==l(p))d=void 0;else{e.data("vjs-cfg",f);for(n=0;n<l(p);n+=1)h=k[p[n]],m=null===h.bind||void 0===h.bind||
h.bind===g.noop?!0:h.bind(q({config:d.config,context:d.jqContext,form:d.$form},{valjs:d,element:e,field:G(e),config:f[h.name],rule:h})),!1!==m?("object"===typeof m&&(f[h.name]=q(!0,{},f[h.name],m)),f.ruleNames.push(p[n])):delete f[p[n]];delete f._field;f.fieldType=G(e);0<f.ruleNames.length?(t._idCount++,f.uid=t._idCount,n=e.data("vjs-ct")?"":"unknown",F(e,w(d,"field",n)).data("vjs-ct",d).data("vjs-cfg",f).data(d.vars.off,0),I(H(e,d),d,"label",n),d=!0):(k=R(e,d,!1),f=H(e,d),k&&k.hide(),k=w(d,"field"),
e.removeClass(k),e.removeClass(d.vars.field),f&&(k=w(d,"label"),f.removeClass(k),f.removeClass(d.vars.label)),e.removeClass("valjs-ty"),e.removeClass(D),e.removeClass("vjs-cfg"),e.removeClass("vjs-ct"),e.removeClass("vjs-h"),e.removeClass("vjs-v"),e.removeClass("vjs-vs"),e.removeClass("vjs-vc"),d=!1)}d&&a.e.push(b[c])}a.$form.data("vjs-b")||(a.$form.data("vjs-b",1),a.$form.on(B(["submit"]),{valjs:a},fa));a.jqContext.on(B(["click","change","keyup","blur"]),"textarea, input:not([type=checkbox], [type=radio], [type=submit], [type=button])",
{valjs:a},O).on(B(["keydown"]),{valjs:a},V).on(B(["click","change"]),"select",{valjs:a},O).on(B(["click","change"]),"input[type=checkbox], input[type=radio]",{valjs:a},O);g(a.s).on(B(["click"]),{valjsSubmit:!0,valjs:a},V)}function u(a){if(0===a)return"n/a";var b;b=Math.floor(Math.log(a)/Math.log(1024));b=parseInt(b,10);return Math.round(a/Math.pow(1024,b),2)+(0<b?" ":"")+(0<b?" KMGTPEZY"[b]+"iB":" bytes")}function q(){var a=Array.prototype.slice.call(arguments);return g.extend.apply(g,a)}function ia(a,
b){var c=new Date(a,0,1+7*(b-1));4>=c.getDay()?c.setDate(c.getDate()-c.getDay()+1):c.setDate(c.getDate()+8-c.getDay());return c}function C(a,b){return void 0===a?-1:a.indexOf(b)}function W(a){a.setDate(a.getDate()+3-(a.getDay()+6)%7);return a.getFullYear()}function X(a,b,c,d){var e=z(a.config.max,c,d);return(a=z(a.config.min,c,d))&&b<a.date?"min":e&&b>e.date?"max":!0}function z(a,b,c){if("now"===a)return{date:new Date};var d,e=0,f=[],g="",h,m,n,p,r=null;for(d=0;d<l(c);d+=1)f.push([c[d],C(b,"%"+c[d])]),
"m"==c[d]?h=!0:"H"==c[d]?m=!0:"w"==c[d]&&(n=!0);p=h||m;h=!n&&!m;f.sort(function(a,b){a=a[1];b=b[1];return a<b?-1:a>b?1:0});for(d=0;d<f.length;d++)-1!==f[d][1]&&e++;g=b.replace(".","\\.").replace("(","\\(").replace(")","\\)").replace(/\\/g,"\\\\");for(d=0;d<l(c);d+=1){b="%"+c[d];switch(c[d]){case "y":e="(\\d{4})";break;default:e="(\\d{1,2})"}g=g.replace(b,e)}if(d=new RegExp("^"+g+"$"))if(a=d.exec(a)){b={};for(d=1;d<a.length;d++)b[f[d-1][0]]=parseInt(a[d],10);p?(--b.m,f=h?new Date(b.y,b.m,b.d):new Date(b.y,
b.m,b.d,b.H,b.M),f.getFullYear()===b.y&&f.getMonth()===b.m&&f.getDate()===b.d&&(m?f.getHours()===b.H&&f.getMinutes()===b.M&&(r=q(!0,{},b,{date:f})):r=q(!0,{},b,{date:f}))):(f=ia(b.y,b.w),1===b.w&&W(f)===b.y-1&&(r=q(!0,{},b,{date:f})),f.getFullYear()===W(f)&&f.getFullYear()===b.y&&(r=q(!0,{},b,{date:f})))}return r}function P(a,b){var c=a.field.value,d=a.config.format;if("d"===b){if(c=z(c,d,["y","m","d"]))return X(a,c.date,"%y-%m-%d",["y","m","d"])}else if("dt"===b){if(c=z(c,d,["y","m","d","H","M"]))return X(a,
c.date,"%y-%m-%d %H:%M",["y","m","d","H","M"])}else if("w"===b&&(c=z(c,d,["y","w"]))){var e=["y","w"],d=z(a.config.max,"%y-W%w",e),c=(e=z(a.config.min,"%y-W%w",e))&&c.date<e.date?"min":d&&c.date>d.date?"max":!0;return c}return!1}function Y(a,b){var c=a.valjs("getFieldType"),d=a.attr(b);return"select"===c.type&&!0===c.isMultiple?void 0!==d?{value:d}:!1:!1}function Q(a,b,c){if(!a)return NaN;"."!==b&&(a=a.replace(".","=-=!"));a=a.replace(b,".");a=a.replace(/^0+(\d)/,"$1");c&&(a=a.replace(/\.0+$/,""),
-1!==a.indexOf(".")&&(a=a.replace(/\.([0-9]+?)(0+)$/,".$1")));b=c?parseFloat(a):parseInt(a);return String(b)===String(a)?b:NaN}function Z(a){if(!("text"!==a.type&&"textarea"!==a.type||a.date||a.number||a.week||a.datetime))return!0}var t=function(a,b){this.valjsv="1.0";this.context=a;this.jqContext=g(a);this.jqContext.data(D,this);this.options=b;this.metadata=this.jqContext.data("valjs");this.$form=null;this.vars={off:"valjs__off",clean:{}};this.e=[];this.s=[]},E=t,D="vjs-i",aa="week date datetime number listmax filemin filemax".split(" ");
t.prototype={defaults:{elements:{submit:"valjs__submit",field:"valjs__field",form:"valjs__form",label:"valjs__label",msg:"valjs__msg",context:"valjs__context"},alwaysTriggerFieldEvents:!1,liveValidation:!0,createMsg:!0,modifierSeparator:null,attrPrefix:"",findMsg:function(a){var b=a.element,c=a.valjs;a=a.create;var d=null,e=c.jqContext.find("[data-msg-for='"+b.attr("id")+"']");c.config.elements&&c.config.elements.msg&&0==l(e)&&(d="LABEL"===b.parent().prop("tagName")?b.parent():b,e=d.next("."+c.config.elements.msg));
0===l(e)&&a&&c.config.createMsg&&(e=g("<span>"),e=e.insertAfter(d));a&&e.show();return e},findLabel:H,allowRuleInitialization:!0,setupField:g.noop,modifiers:{valid:"valjs-valid",invalid:"valjs-invalid",unknown:"valjs-unknown",error:"valjs-error",warning:"valjs-warning"},selector:{elements:"input:not([type=submit], [type=button]),select,textarea",submit:'input[type="submit"],button[type="submit"],button:not([type]),input[type="image"]'},submitform:g.noop},ruleDefaults:{testElement:g.noop,bind:g.noop,
prio:100,run:g.noop,options:{value:!0},findMsg:g.noop},resetField:function(){var a=g(this).data("vjs-ct");console.warn(a);U(g(this),a)},validateField:function(){var a=g(this).data("vjs-ct"),b=J(g(this));N(g(this),a,b)},getFieldStatus:function(){var a=g(this).data("vjs-v");return void 0===a?0:a},getFieldType:function(){return G(g(this))},updateBindings:function(){g(this).data("vjs-ct");var a=g(this).data(D);L(a)},init:function(){this.config=q(!0,{},this.defaults,t.global,this.options);var a=this,b=
this.config.selector;this.vars=ga(this.config);if("FORM"===this.jqContext.prop("tagName"))this.$form=this.jqContext;else if(this.$form=this.jqContext.closest("form"),this.$form.data(D))throw"valjs: form/context conflict";F(this.jqContext,w(this,"context"));F(this.$form.attr("novalidate",""),w(this,"form"));this.s=g(A(b.submit,this.jqContext));F(this.s,w(this,"submit"));if(this.config.submitform&&this.config.submitform!=g.noop)this.jqContext.on("submitform.valjs",this.config.submitform);g.isFunction(this.config.init)?
setTimeout(function(){L(a);a.config.init(a)},1):L(a);return this},refresh:function(){L(this)},hasRule:function(a){"string"===typeof a&&(a=[a]);var b=g(this).data("vjs-cfg"),c;if(b)for(c=0;c<a.length;c+=1){if(b.hasOwnProperty(a[c]))return!0}else g.error("ValJS not found",g(this));return!1},disable:function(a){this.valjsv&&this.$elm.find(a).data(this.vars.off,1)}};t._idCount=0;t.ruleDefaults=t.prototype.ruleDefaults;t.global={};t.addRule=p;t.rules={k:[]};g.fn.valjs=function(a){if(t.prototype[a]){if(g(this).data(D))return t.prototype[a].apply(g(this),
Array.prototype.slice.call(arguments,1));var b=Array.prototype.slice.call(arguments,1),c=this.map(function(c){c=b;return t.prototype[a].apply(g(this),c)});return 1==c.length?c[0]:c}if("object"===typeof a||!a)return this.each(function(){if(g(this).data(D))return g(this).valjs("updateBindings"),this;(new t(this,a||{})).init()});g.error("No ValJS method "+a)};p("listmin",{options:{msg:"Select more items"},testElement:function(a){return Y(a.element,"min")},run:function(a){var b=a.config.value;return l(A("option:selected",
a.element))>=b},bind:function(a){return{value:parseInt(a.config.value)}}});p("listmax",{options:{msg:"Too many items selected"},testElement:function(a){return Y(a.element,"max")},run:function(a){var b=a.config.value;return l(A("option:selected",a.element))<=b},bind:function(a){return{value:parseInt(a.config.value)}}});p("date",{options:{msg:{error:"Invalid date",max:"Enter an earlier date",min:"Enter a later date"},format:"%y-%m-%d"},testElement:function(a){return a.element.attr("type")===a.rule.name},
bind:function(a){a=a.element;var b,c={};(b=a.attr("min"))&&(c.min=b);(b=a.attr("max"))&&(c.max=b);return c},run:function(a){return 0===l(a.field.value)?!0:P(a,"d")}});p("datetime",{options:{msg:{error:"Invalid date",max:"Enter an earlier date",min:"Enter a later date"},format:"%y-%m-%d %H:%M"},testElement:function(a){return a.element.attr("type")===a.rule.name},bind:function(a){a=a.element;var b,c={};(b=a.attr("min"))&&(c.min=b);(b=a.attr("max"))&&(c.max=b);return c},run:function(a){return 0===l(a.field.value)?
!0:P(a,"dt")}});p("week",{options:{msg:{error:"Invalid week",max:"Enter an earlier week",min:"Enter a later week"},format:"%y-W%w"},testElement:function(a){return a.element.attr("type")===a.rule.name},bind:function(a){a=a.element;var b,c={};(b=a.attr("min"))&&(c.min=b);(b=a.attr("max"))&&(c.max=b);return c},run:function(a){return 0===l(a.field.value)?!0:P(a,"w")}});p("required",{options:{msg:"Required",trim:!1,emptyIndex:void 0,emptyValue:void 0},prio:10,testElement:function(a){return void 0!==a.element.attr(a.rule.name)},
run:function(a){var b=a.element,c=a.field.type,d=a.field.value,e=0;if("text"===c||"textarea"===c||"file"===c){if(d=!0===a.config.trim?g.trim(a.field.value):d,0===l(d))return"error"}else if("select"===c)if(void 0===b.attr("multiple"))if(void 0!==a.config.emptyIndex){if(e=parseInt(a.config.emptyIndex),d=A("option:selected",b).index(),d===e)return"error"}else if(void 0!==a.config.emptyValue){if(d[0]===a.config.emptyValue)return"error"}else{if(0==d[0].length)return"error"}else{if(0===l(d))return"error"}else if(("checkbox"===
c||"radio"===c)&&!1===d)return"error";return!0},bind:function(a){return!0}});p("number",{options:{msg:{error:"Not a number",max:"Value too high",min:"Value too low"},separator:".",step:null},testElement:function(a){return"number"===a.element.attr("type")},run:function(a){var b=a.field.value,c="any"===a.config.step,d=Q(a.config.max,".",c),e=Q(a.config.min,".",c),f=b;if(0!==l(b)){f=Q(b,a.config.separator,c);if(isNaN(f))return!1;if(!isNaN(e)&&f<e)return"min";if(!isNaN(d)&&f>d)return"max"}return!0},bind:function(a){return{step:a.element.attr("step"),
min:a.element.attr("min"),max:a.element.attr("max")}}});p("textmax",{options:{msg:{error:"Text too long"}},prio:150,testElement:function(a){var b=a.element.valjs("getFieldType");if((a=a.element.attr("max"))&&Z(b))return{value:a}},bind:function(a){return a.element.valjs("hasRule",aa)?!1:q(!0,a.config,{value:parseInt(a.config.value,10)})},run:function(a){var b=a.field.value;return b&&l(b)>a.config.value?!1:!0}});p("textmin",{options:{msg:{error:"Text too short"}},prio:150,testElement:function(a){var b=
a.element.valjs("getFieldType");if((a=a.element.attr("min"))&&Z(b))return{value:a}},bind:function(a){return a.element.valjs("hasRule",aa)?!1:q(!0,a.config,{value:parseInt(a.config.value,10)})},run:function(a){var b=a.field.value;return b&&l(b)<a.config.value?!1:!0}});p("filemax",{options:{msg:{error:null,one:"File too large",all:"Total size too large"}},testElement:function(a){var b=a.element.valjs("getFieldType");a=a.element.attr("max");if("file"===b.type&&a)return{value:a}},bind:function(a){return q(!0,
a.config,{value:parseInt(a.config.value,10)})},run:function(a){var b=a.config.value,c=a.element[0].files,d=l(c),e,f=0;if(0<d){for(e=0;e<d;e+=1)if(a=c[e].size,f+=a,a>b)return{msg:"one",maxKiB:b,maxsize:u(b),filename:c[e].name,fileKiB:a,filesize:u(a)};if(f>b)return{msg:"all",totalKiB:f,totalsize:u(f),maxsize:u(b),maxKiB:b}}return!0}});p("filemin",{options:{msg:{error:null,one:"File too small",all:"Total size too small"}},testElement:function(a){var b=a.element.valjs("getFieldType");a=a.element.attr("min");
if("file"===b.type&&a)return{value:a}},bind:function(a){return q(!0,a.config,{value:parseInt(a.config.value,10)})},run:function(a){var b=a.config.value,c=a.element[0].files,d=l(c),e,f=0;if(0<d){for(e=0;e<d;e+=1)if(a=c[e].size,f+=a,console.warn(a,b),a<b)return{msg:"one",minbytes:b,minsize:u(b),filename:c[e].name,filebytes:a,filesize:u(a)};if(f<b)return{msg:"all",totalbytes:f,totalsize:u(f),minsize:u(b),minbytes:b}}return!0}});p("email",{options:{msg:{error:"Invalid e-mail"},domain:!0},testElement:function(a){return a.element.attr("type")===
a.rule.name},run:function(a){var b=a.field.value,c,d=!0,e,f,g;return 0<l(b)?("string"!==typeof b&&(b=b[0]),c=b.indexOf("@"),-1===c?d=!1:(e=b.substr(c+1),c=b.substr(0,c),f=c.length,g=e.length,1>f||64<f?d=!1:1>g||255<g?d=!1:"."==c[0]||"."==c[f-1]?d=!1:/\.\./.test(c)?d=!1:/^[\u00e5\u00e4\u00f6A-Za-z0-9\\-\\.]+$/.test(e)?/^[\u00e5\u00e4\u00f6A-Za-z0-9\\-\\.]+$/.test(e)?/\.\./.test(e)?d=!1:/^(\\.|[A-Za-z0-9!#%&`_=\/$\'*+?^{}|~.-])+$/.test(c.replace("\\\\",""))||/^"(\\\\"|[^"])+"$/.test(c.replace("\\\\",
""))||(d=!1):d=!1:d=!1,a.config.domain&&(/\.[a-z]{2,4}$/.test(b)||(d=!1))),d?!0:!1):!0},bind:function(a){return"select"===a.type&&void 0===a.element.attr("multiple")?!1:!0}});p("confirm",{options:{msg:{error:"Fields don't match",invalidSource:"Source field invalid"}},run:function(a){if(!T(a.config.celm))return!0;0===a.config.celm.valjs("getFieldStatus")&&a.config.celm.valjs("validateField");return-1===a.config.celm.valjs("getFieldStatus")?"invalidSource":a.config.celm.val()===a.element.val()?!0:!1},
bind:function(a){var b=ha(a.context,a.config.value);if(void 0!==b){if(a.valjs.config.liveValidation)b.on("keydown keyup change blur",function(){a.element.valjs("validateField")}).on("validfield.valjs",function(){a.element.valjs("validateField")});return{celm:b}}}});p("pattern",{options:{ignoreCase:!1,invert:!1,msg:{error:"Incorrect format"}},testElement:function(a){if(a=a.element.attr("pattern"))return{value:a}},run:function(a){var b=new RegExp(a.config.value,a.config.ignoreCase?"i":"");if(a.field.value){if(b)if(b=
b.test(a.field.value)){if(!a.config.invert)return!0}else if(a.config.invert)return!0;return!1}return!0}});p("url",{options:{value:"ost",msg:{error:"Invalid URL"}},testElement:function(a){return"url"===a.element.attr("type")},run:function(a){return a.field.value?/^(https?|s?ftp|wss?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a.field.value):
!0}});p("security",{options:{value:"luns",match:2,msg:{error:"Requirements not met"}},bind:function(a){return{match:parseInt(a.config.match,10)}},run:function(a){var b=a.field.value,c=a.config.value;a=a.config.match;var d=0;a>c.length&&(a=c.length);-1!=C(c,"l")&&(d+=b.match(/[a-z]/)?1:0);-1!=C(c,"u")&&(d+=b.match(/[A-Z]/)?1:0);-1!=C(c,"n")&&(d+=b.match(/\d/)?1:0);-1!=C(c,"s")&&(c=new RegExp("["+'!@#$%^&*()_+|~-=\u00e2\u20ac\u02dc{}[]:";\u00e2\u20ac\u2122<>?,./'.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")+"]"),b.match(c)&&d++);return d>=a?!0:!1}});return t}(window,jQuery);